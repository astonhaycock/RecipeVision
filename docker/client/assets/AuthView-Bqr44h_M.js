import{d as R,i as F,a as v,v as q,b as u,c as d,j as y,g as n,f as l,x as H,k as w,l as _,u as m,e as z,s as f,y as N,p as I,n as Z,_ as B}from"./index-Dc6v9LSW.js";/* empty css                                                                     *//* empty css                                                               */const E=p=>(I("data-v-41c8ee6a"),p=p(),Z(),p),K=E(()=>w("h1",{class:"pb-10"},"Login",-1)),Q=E(()=>w("br",null,null,-1)),X={id:"btn"},Y={key:0},ee={key:0,id:"register",class:"pa-10"},oe=E(()=>w("h1",null,"Welcome to login page",-1)),se=E(()=>w("p",null,"Don't have an account?",-1)),te=R({__name:"Login",emits:["login","registerPage","demoLogin"],setup(p,{emit:L}){const S=/^(([^<>()\[\]\.,;:\s@"]+(\.[^<>()\[\]\.,;:\s@"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,b=L,g=!0,h=F("mobile"),i=v({email:"",password:""}),$=v(!1),k=v(!1),V=q();v("login");const s=v(!1);async function x(){const r=new Headers;r.append("Content-Type","application/json"),(await fetch("http://dogsmeow.asuscomm.com:8880/api/session",{credentials:"include",method:"POST",headers:r,body:JSON.stringify(i.value)})).status===201?(console.log("Successfully logged in"),V.push("/"),i.value={email:"",password:""},b("login")):s.value=!0}function P(r){return!!r||"Field is required"}function T(r){return!!r.match(S)||"Email not valid"}return(r,t)=>{const A=u("v-text-field"),U=u("v-btn"),C=u("v-chip"),D=u("v-form"),e=u("v-card"),o=u("v-sheet");return d(),y(o,{id:"sheet",rounded:"",class:N(m(h)?"align-center":"align-start pt-16 mt-16")},{default:n(()=>[l(e,{id:"login-container",class:"mx-auto",height:"600px","min-width":"344"},{default:n(()=>[l(D,{class:"pa-15",id:"form-container",modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=a=>k.value=a),onSubmit:H(x,["prevent"]),"min-width":"300",width:"500","elevation-80":""},{default:n(()=>[K,l(A,{id:"input",class:"mx-auto",modelValue:i.value.email,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value.email=a),readonly:$.value,rules:[P,T],label:"Email",width:"300px",clearable:""},null,8,["modelValue","readonly","rules"]),l(A,{class:"mx-auto",modelValue:i.value.password,"onUpdate:modelValue":t[1]||(t[1]=a=>i.value.password=a),readonly:$.value,rules:[P],label:"Password",placeholder:"Enter your password",width:"300px",type:"password",clearable:""},null,8,["modelValue","readonly","rules"]),Q,w("div",X,[l(U,{disabled:!k.value,loading:$.value,color:"success",size:"large",type:"submit",variant:"elevated",block:""},{default:n(()=>[_(" Login ")]),_:1},8,["disabled","loading"]),m(h)?(d(),z("p",Y,"or")):f("",!0),m(h)?(d(),y(C,{key:1,onClick:t[2]||(t[2]=a=>r.$emit("registerPage")),class:"d-flex justify-center align-center",id:"btn-chip",size:"large",variant:"elevated",block:""},{default:n(()=>[_(" Register ")]),_:1})):f("",!0),m(h)&&g?(d(),y(C,{key:2,onClick:t[3]||(t[3]=a=>r.$emit("demoLogin")),class:"d-flex justify-center align-center bg-red",id:"btn-chip",size:"large",variant:"elevated",block:""},{default:n(()=>[_(" Demo Access ")]),_:1})):f("",!0)])]),_:1},8,["modelValue"]),m(h)?f("",!0):(d(),z("div",ee,[oe,se,l(C,{onClick:t[5]||(t[5]=a=>r.$emit("registerPage"))},{default:n(()=>[_("Sign Up")]),_:1}),l(C,{onClick:t[6]||(t[6]=a=>r.$emit("demoLogin")),class:"bg-red"},{default:n(()=>[_("Demo Access")]),_:1})]))]),_:1})]),_:1},8,["class"])}}}),ne=B(te,[["__scopeId","data-v-41c8ee6a"]]),O=p=>(I("data-v-9d26d6b0"),p=p(),Z(),p),ae=O(()=>w("h1",{class:"pb-10"},"Create an Account",-1)),le=O(()=>w("br",null,null,-1)),ie={id:"btn"},re={key:0},de={key:0,id:"login",class:"pa-10"},ue=O(()=>w("h1",null,"Welcome to Register page",-1)),ce=O(()=>w("p",null,"have an account?",-1)),me=R({__name:"Register",emits:["login","loginPage","demoLogin"],setup(p,{emit:L}){const S=L,b=!0,g=F("mobile"),h=/^(([^<>()\[\]\.,;:\s@"]+(\.[^<>()\[\]\.,;:\s@"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=/[!@#$%^&*(),.?":{}|<>]/,$=/[A-Z]/,k=/[a-z]/,V=/[0-9]/,s=v({email:"",password:"",password2:""}),x=v(!1),P=v(!1),T=q();v("login");async function r(){console.log(s.value);const e=new Headers;e.append("Content-Type","application/json");const o={method:"POST",headers:e,body:JSON.stringify(s.value)};(await fetch("http://dogsmeow.asuscomm.com:8880/api/user",o)).status===201?(console.log("Successfully registered"),await t()):console.log("Failed to register")}async function t(){const e=new Headers;e.append("Content-Type","application/json");const o={method:"POST",headers:e,body:JSON.stringify(s.value)};(await fetch("http://dogsmeow.asuscomm.com:8880/api/session",o)).status===201?(console.log("Successfully logged in"),T.push("/"),s.value={email:"",password:"",password2:""},S("login")):console.log("Failed to login")}function A(e){return e.length<8?"Password must be at least 8 characters long":e.length>64?"Password must not exceed 64 characters":e.match(i)?e.match($)?e.match(k)?e.match(V)?!!e:"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password must contain at least one special character"}function U(e){return!!e||"Field is required"}function C(e){return!!e.match(h)||"Email not valid"}function D(e){return s.value.password===e||"Passwords do not match"}return(e,o)=>{const a=u("v-text-field"),J=u("v-btn"),j=u("v-chip"),M=u("v-form"),W=u("v-card"),G=u("v-sheet");return d(),y(G,{id:"sheet",rounded:"",class:N(m(g)?"align-center":"align-start pt-16 mt-16")},{default:n(()=>[l(W,{id:"login-container",class:"mx-auto",height:"600px","min-width":"300"},{default:n(()=>[l(M,{class:N(["pa-15",m(g)?"pa-15":" pt-0"]),id:"form-container",modelValue:P.value,"onUpdate:modelValue":o[5]||(o[5]=c=>P.value=c),onSubmit:H(r,["prevent"]),"min-width":"300",width:"500","elevation-80":""},{default:n(()=>[ae,l(a,{modelValue:s.value.email,"onUpdate:modelValue":o[0]||(o[0]=c=>s.value.email=c),readonly:x.value,rules:[U,C],label:"Email",width:"300px",clearable:""},null,8,["modelValue","readonly","rules"]),l(a,{modelValue:s.value.password,"onUpdate:modelValue":o[1]||(o[1]=c=>s.value.password=c),readonly:x.value,rules:[U,A],label:"Password",width:"300px",type:"password",clearable:""},null,8,["modelValue","readonly","rules"]),l(a,{modelValue:s.value.password2,"onUpdate:modelValue":o[2]||(o[2]=c=>s.value.password2=c),readonly:x.value,rules:[U,D],label:"Confirm Password",placeholder:"Enter your password",width:"300px",type:"password",clearable:""},null,8,["modelValue","readonly","rules"]),le,w("div",ie,[l(J,{disabled:!P.value,loading:x.value,color:"success",size:"large",type:"submit",variant:"elevated",block:""},{default:n(()=>[_(" Register ")]),_:1},8,["disabled","loading"]),m(g)?(d(),z("p",re,"or")):f("",!0),m(g)?(d(),y(j,{key:1,onClick:o[3]||(o[3]=c=>e.$emit("loginPage")),id:"btn-chip",class:"d-flex justify-center align-center",size:"large",variant:"elevated",block:""},{default:n(()=>[_(" Login ")]),_:1})):f("",!0),m(g)&&b?(d(),y(j,{key:2,onClick:o[4]||(o[4]=c=>e.$emit("demoLogin")),class:"d-flex justify-center align-center bg-red",id:"btn-chip",size:"large",variant:"elevated",block:""},{default:n(()=>[_(" Demo Access ")]),_:1})):f("",!0)])]),_:1},8,["class","modelValue"]),m(g)?f("",!0):(d(),z("div",de,[ue,ce,l(j,{onClick:o[6]||(o[6]=c=>e.$emit("loginPage"))},{default:n(()=>[_("Login")]),_:1}),l(j,{onClick:o[7]||(o[7]=c=>e.$emit("demoLogin")),class:"bg-red"},{default:n(()=>[_("Demo Access")]),_:1})]))]),_:1})]),_:1},8,["class"])}}}),pe=B(me,[["__scopeId","data-v-9d26d6b0"]]),ge={id:"page"},we=R({__name:"AuthView",emits:["login","register"],setup(p,{emit:L}){const S=L,b=v("login"),g=q(),h="http://dogsmeow.asuscomm.com:8880";function i(){S("login")}function $(){b.value="register"}function k(){b.value="login"}async function V(){const s=await fetch(`${h}/api/demo_auth`,{method:"POST",credentials:"include"});s.status===201?(console.log("Successfully logged in"),i(),g.push("/")):s.status==409?(console.log("User already exists"),i()):console.log("Failed to login")}return(s,x)=>(d(),z("div",ge,[b.value==="login"?(d(),y(ne,{key:0,onLogin:i,onRegisterPage:$,onDemoLogin:V})):f("",!0),b.value==="register"?(d(),y(pe,{key:1,onLogin:i,onLoginPage:k,onDemoLogin:V})):f("",!0)]))}});export{we as default};
