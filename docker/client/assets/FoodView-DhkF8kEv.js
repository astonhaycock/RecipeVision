import{d as q,i as D,q as N,a as c,z as B,o as re,b as t,c as o,j as C,g as s,f as e,k as u,l as F,u as m,s as S,e as f,h as T,F as R,y as O,t as M,p as X,n as Y,_ as E,A as Z,x as ue,B as K,w as Q,C as pe,D as ve,E as W}from"./index-Dc6v9LSW.js";import{a as me,_ as _e}from"./AiRecipeRow.vue_vue_type_script_setup_true_lang-D97ZrDUI.js";/* empty css                                                               *//* empty css                                                                     */const H=h=>(X("data-v-0b62260d"),h=h(),Y(),h),ge=H(()=>u("div",{class:"text-h3"},"Recipes",-1)),fe={class:"d-flex flex-column ga-4"},he={key:0,id:"recipe_modal"},we={id:"paper",class:"d-flex flex-column ga-2 overflow-auto"},xe={class:"d-flex justify-end"},ye={class:"text-h4 pt-5 ma-4 d-flex justify-center align-center"},be=H(()=>u("h2",null,"Instructions",-1)),ke={class:"ml-8"},Ie={class:"d-flex flex-column"},$e=H(()=>u("h2",null,"Ingredients",-1)),Ce={class:"ml-8"},Re=q({__name:"Recipe",props:{recipes:{required:!0},recipesModifiers:{}},emits:["update:recipes"],setup(h){const L=D("mobile"),k=N(h,"recipes"),a=c([]),n=D("recipe_modal"),p=D("fullRecipeRefresh");c(!1);const i="http://dogsmeow.asuscomm.com:8880/api/ai/image/";c(!1);async function l(){const I=await fetch("http://dogsmeow.asuscomm.com:8880/api/ai/recipes");if(I.status===200){const g=await I.json();a.value=g}}async function d(){const I=await fetch("http://dogsmeow.asuscomm.com:8880/api/recipe/generate");I.status===200&&(await I.json(),l())}function _(){n.value=null}return B(()=>{B(()=>{n&&(n.value=null)})}),re(()=>{l()}),(I,g)=>{const v=t("v-btn"),w=t("v-card"),$=t("v-row"),U=t("v-icon"),j=t("v-img"),V=t("v-container"),x=t("v-main");return o(),C(x,{class:"position-absolute top-0 mx-0 px-0 w-100 fill-height bg-grey-lighten-4"},{default:s(()=>[e(V,{class:"mx-auto mb-16 bg-grey-lighten-4",fluid:""},{default:s(()=>[e($,{class:"mt-3 d-flex justify-center align-center"},{default:s(()=>[e(w,{class:"pa-12 mt-3 d-flex justify-center align-center ga-5","elevation-24":""},{default:s(()=>[ge,u("div",fe,[e(v,{class:"text-h6 bg-green",onClick:d},{default:s(()=>[F("Generate Ai Recipe")]),_:1}),e(v,{class:"text-h6 bg-green",onClick:m(p)},{default:s(()=>[F("Refresh Recipes")]),_:1},8,["onClick"])])]),_:1})]),_:1}),a.value.length>0?(o(),C(me,{key:0,recipes:a.value},null,8,["recipes"])):S("",!0),(o(!0),f(R,null,T(k.value,(r,y)=>(o(),f(R,null,[r.length>0?(o(),C(_e,{key:0,recipes:{query:y,cards:r}},null,8,["recipes"])):S("",!0)],64))),256)),e(w,null,{default:s(()=>{var r;return[m(n)?(o(),f("div",he,[u("div",we,[u("div",xe,[e(U,{size:"40",color:"white",class:"bg-red",icon:"mdi-close-thick",id:"icon_exit",onClick:_})]),u("div",{class:O(["d-flex h-50 ga-2",m(L)?"flex-column justify-center align-center":"flex-row"])},[e(j,{"lazy-src":"https://images.pexels.com/photos/1640774/pexels-photo-1640774.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",src:i+((r=m(n))==null?void 0:r.image),class:"w-50",alt:"Recipe Image"},null,8,["src"]),u("div",ye,M(m(n).title),1)],2),u("div",null,[u("h4",null,M(m(n).description),1),u("div",{class:O(["d-flex justify-space-around",m(L)?"flex-column":"flex-row"])},[u("div",{class:O(["d-flex flex-column",m(L)?"w-90":"w-50"])},[be,u("ol",ke,[(o(!0),f(R,null,T(m(n).instructions,y=>(o(),f("li",{key:y},M(y),1))),128))])],2),u("div",Ie,[$e,u("ul",Ce,[(o(!0),f(R,null,T(m(n).ingredients,y=>(o(),f("li",{key:y},M(y),1))),128))])])],2)])])])):S("",!0)]}),_:1})]),_:1})]),_:1})}}}),Le=E(Re,[["__scopeId","data-v-0b62260d"]]),Ue=q({__name:"ReviewList",props:{reviewList:{},reviewListModifiers:{}},emits:Z(["addIngredients"],["update:reviewList"]),setup(h,{emit:L}){const k=c([]),a=N(h,"reviewList");c(-1),c(""),c(!1);async function n(p){const i=new Headers;i.append("Content-Type","application/json");const l={items:p};console.log(l);const d={method:"PUT",headers:i,body:JSON.stringify(l)},_=await fetch("http://dogsmeow.asuscomm.com:8880/api/ingredients",d);a.value=[],_.status===201?console.log("Successfully added ingredient"):console.log("Failed to add ingredient")}return(p,i)=>{const l=t("v-chip"),d=t("v-chip-group"),_=t("v-card-text"),I=t("v-btn");return o(),f(R,null,[e(_,null,{default:s(()=>[e(d,{modelValue:k.value,"onUpdate:modelValue":i[0]||(i[0]=g=>k.value=g),column:"",multiple:""},{default:s(()=>[(o(!0),f(R,null,T(a.value,g=>(o(),C(l,{text:g,variant:"outlined","filter-icon":"mdi-plus"},null,8,["text"]))),256))]),_:1},8,["modelValue"])]),_:1}),a.value?(o(),C(I,{key:0,onClick:i[1]||(i[1]=g=>(n(a.value),p.$emit("addIngredients")))},{default:s(()=>[F("Add Ingredients")]),_:1})):S("",!0)],64)}}}),je=h=>(X("data-v-6ad36e80"),h=h(),Y(),h),Se={id:"container"},Ve={id:"title"},De=je(()=>u("h1",null,"Ingredients",-1)),Fe={for:"actual-btn"},Me={key:0,id:"image"},Te={key:0},Oe={key:1,id:"loading-bar"},qe={key:1,class:"text-center bg-red rounded"},Ae=q({__name:"ImageUpload",emits:["reviewIngredients","update"],setup(h,{emit:L}){const k="http://dogsmeow.asuscomm.com:8880/api/image";c("");const a=c(null),n=c(null),p=c(!1),i=c(null),l=c(!1),d=g=>{var $;const w=(($=g.target.files)==null?void 0:$[0])||null;if(w){a.value=w;const U=new FileReader;U.onload=j=>{j.target&&(n.value=j.target.result)},U.readAsDataURL(w)}},_=async()=>{if(p.value=!0,l.value=!1,a.value){const g=new FormData;g.append("image",a.value);const w=await fetch(k,{method:"POST",body:g}),$=await w.json();console.log(w.status),w.status===200&&$.length>0?(i.value=$,p.value=!1,n.value=null):(p.value=!1,n.value=null,l.value=!0)}},I=()=>{n.value=null};return(g,v)=>{const w=t("v-icon"),$=t("v-img"),U=t("v-btn"),j=t("v-progress-linear");return o(),f(R,null,[u("div",Se,[u("div",Ve,[De,u("form",{onSubmit:v[0]||(v[0]=ue(()=>{},["prevent"]))},[u("input",{type:"file",id:"actual-btn",onChange:d,hidden:""},null,32),u("label",Fe,[e(w,{for:"actual-btn",class:"ma-2 bg-blue rounded-circle pa-8",size:"40",color:"white",icon:"mdi-file-image-plus-outline"})])],32)]),n.value?(o(),f("div",Me,[e($,{width:220,"aspect-ratio":"16/9",cover:"",src:n.value},null,8,["src"]),p.value?(o(),f("div",Oe,[e(j,{id:"bar",indeterminate:!0})])):(o(),f("div",Te,[e(U,{class:"d-flex flex-grow-1",onClick:v[1]||(v[1]=V=>I())},{default:s(()=>[F("Discard")]),_:1}),e(U,{class:"d-flex flex-grow-1",onClick:v[2]||(v[2]=V=>_())},{default:s(()=>[F("Upload")]),_:1})]))])):S("",!0),l.value?(o(),f("h3",qe,"Image Failed")):S("",!0)]),e(Ue,{"review-list":i.value,"onUpdate:reviewList":v[3]||(v[3]=V=>i.value=V),onAddIngredients:v[4]||(v[4]=V=>g.$emit("update"))},null,8,["review-list"])],64)}}}),ze=E(Ae,[["__scopeId","data-v-6ad36e80"]]),Be=q({__name:"Ingredient",props:{ingredients:{required:!0},ingredientsModifiers:{}},emits:Z(["ingredient-change"],["update:ingredients"]),setup(h,{emit:L}){const k=L,a=D("mobile"),n=N(h,"ingredients"),p=c(!1),i=c(!1),l=c(""),d=c([]),_=c([]),I=K(()=>d.value.length===n.value.length),g=K(()=>{const x=l.value.toLowerCase();return x?n.value.filter(r=>r.toLowerCase().includes(x)):n.value}),v=c("mdi-food-apple"),w=c("red-darken-1");Q(i,()=>{i.value?v.value="mdi-chevron-left":v.value="mdi-food-apple"});function $(){i.value=!i.value,i.value?(l.value="",j()):k("ingredient-change")}Q(d,()=>{l.value=""});async function U(){console.log(d.value);const x=new Headers;x.append("Content-Type","application/json"),p.value=!0;const r={items:d.value},y={headers:x,method:"DELETE",body:JSON.stringify(r)};(await fetch("http://dogsmeow.asuscomm.com:8880/api/ingredients",y)).status===204?(setTimeout(()=>{_.value=_.value.concat(d.value),n.value=n.value.filter(A=>!_.value.includes(A)),d.value=[],p.value=!1},2e3),console.log("List deleted Successfully")):console.log("List not deleted")}async function j(){_.value=[],console.log("Getting Ingredients...");const x=await fetch("http://dogsmeow.asuscomm.com:8880/api/ingredients"),r=await x.json();x.status===200?(n.value=r,console.log("Ingredient got Successfully")):console.log("Ingredients not received")}async function V(){const x=l.value;(await fetch(`http://dogsmeow.asuscomm.com:8880/api/ingredient/${encodeURIComponent(x)}`,{method:"POST",credentials:"include"})).status===201&&n.value.push(x)}return(x,r)=>{const y=t("v-container"),G=t("v-chip"),A=t("v-col"),ee=t("v-spacer"),z=t("v-btn"),te=t("v-card-actions"),ne=t("v-text-field"),se=t("v-row"),P=t("v-divider"),oe=t("v-icon"),le=t("v-list-item-title"),ie=t("v-list-item"),ae=t("v-list"),ce=t("v-card"),de=t("v-navigation-drawer");return o(),C(y,null,{default:s(()=>[e(de,{modelValue:i.value,"onUpdate:modelValue":r[3]||(r[3]=b=>i.value=b),width:m(a)&&i.value?2400:350,id:"ingredient-container",location:"left",mobile:m(a),class:O(m(a)?"elevation-0":"elevation-2 "),"disable-route-watcher":""},{default:s(()=>[e(y,{class:O(m(a)?"pr-10":"")},{default:s(()=>[e(ze,{onUpdate:r[0]||(r[0]=b=>j())})]),_:1},8,["class"]),e(ce,{class:"mx-auto","max-width":"500"},{default:s(()=>[e(y,null,{default:s(()=>[e(se,{align:"center",justify:"start"},{default:s(()=>[(o(!0),f(R,null,T(d.value,(b,J)=>(o(),C(A,{key:b,class:"py-1 pe-0",cols:"auto"},{default:s(()=>[e(G,{disabled:p.value,closable:"","onClick:close":Ee=>d.value.splice(J,1)},{default:s(()=>[F(M(b),1)]),_:2},1032,["disabled","onClick:close"])]),_:2},1024))),128)),e(te,null,{default:s(()=>[e(ee),d.value.length?(o(),C(z,{key:0,loading:p.value,color:"purple",variant:"text",onClick:U},{default:s(()=>[F(" Delete ")]),_:1},8,["loading"])):S("",!0)]),_:1}),e(A,{cols:"12"},{default:s(()=>[e(ne,{ref:"searchField",modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=b=>l.value=b),label:"Search or Add","hide-details":"","single-line":"",onClick:r[2]||(r[2]=b=>{m(a)||(l.value="")})},null,8,["modelValue"]),pe(e(z,{onClick:V},{default:s(()=>[F(" Add it! ")]),_:1},512),[[ve,g.value.length===0]])]),_:1})]),_:1})]),_:1}),I.value?S("",!0):(o(),C(P,{key:0})),e(ae,{id:"list-ingredients"},{default:s(()=>[(o(!0),f(R,null,T(g.value,b=>(o(),f(R,null,[d.value.includes(b)?S("",!0):(o(),C(ie,{class:"d-flex",key:b,disabled:p.value,onClick:J=>d.value.push(b)},{prepend:s(()=>[e(oe,{disabled:p.value},null,8,["disabled"])]),default:s(()=>[e(le,{textContent:M(b)},null,8,["textContent"])]),_:2},1032,["disabled","onClick"]))],64))),256))]),_:1}),e(P)]),_:1}),e(z,{onClick:$,id:"toggle-drawer",size:"55",clipped:"",color:w.value,class:O(m(a)&&i.value?"position-fixed top-0 right-0  mr-4 mt-4":"position-fixed top-0 right-0 mr-n16 mt-4"),icon:v.value},null,8,["color","class","icon"])]),_:1},8,["modelValue","width","mobile","class"])]),_:1})}}}),Ne=E(Be,[["__scopeId","data-v-ab75ff11"]]),Ke=q({__name:"FoodView",emits:["login"],setup(h,{emit:L}){const k=D("ingredients"),a=D("recipes");D("recipe_ideas");const n=D("populateRecipes");c(!0),c([]);const p=L;return B(async()=>{p("login")}),(i,l)=>{const d=t("v-main");return o(),C(d,null,{default:s(()=>[e(Le,{recipes:m(a),"onUpdate:recipes":l[0]||(l[0]=_=>W(a)?a.value=_:null)},null,8,["recipes"]),e(Ne,{ingredients:m(k),"onUpdate:ingredients":l[1]||(l[1]=_=>W(k)?k.value=_:null),onIngredientChange:l[2]||(l[2]=_=>m(n)(!1))},null,8,["ingredients"])]),_:1})}}});export{Ke as default};
